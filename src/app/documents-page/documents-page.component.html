<kendo-buttongroup>
  <button kendoButton (click)="reset()">Reset</button>
  <button kendoButton (click)="deleteSelected()">Delete selected</button>
</kendo-buttongroup>

<hr />

<kendo-splitter class="page">
  <kendo-splitter-pane>
    <div class="grid-wrapper h-100">
      <kendo-grid
        #grid
        class="h-100"
        [kendoGridBinding]="documents"
        [trackBy]="trackBy"
        [resizable]="true"
        [reorderable]="true"
        kendoGridSelectBy="id"
        [(selectedKeys)]="selectedRowsDocumentIds"
        [selectable]="{
          checkboxOnly: true,
          mode: 'multiple'
        }"
        [groupable]="true"
        cdkDropListGroup
      >
        <kendo-grid-checkbox-column
          [width]="40"
          [showSelectAll]="true"
        ></kendo-grid-checkbox-column>

        <kendo-grid-column
          field="id"
          title="Id"
          [width]="50"
        ></kendo-grid-column>

        <kendo-grid-column
          field="workspace"
          title="Workspace"
          [width]="150"
        ></kendo-grid-column>

        <kendo-grid-column
          field="profile"
          title="Profil"
          [width]="150"
        ></kendo-grid-column>

        <kendo-grid-column field="title" title="Název souboru">
          <ng-template kendoGridCellTemplate let-dataItem>
            <div
              cdkDropList
              #nameField="cdkDropList"
              [cdkDropListData]="dataItem"
              (cdkDropListDropped)="drop($event)"
              data-droplist="file"
            >
              <div cdkDrag *ngIf="dataItem.title">
                <i cdkDragHandle>#</i
                ><span class="filename" (click)="openPreview(dataItem)">{{
                  dataItem.title
                }}</span>
              </div>
            </div>
          </ng-template>
        </kendo-grid-column>

        <kendo-grid-column field="attachments" title="Přílohy">
          <ng-template kendoGridCellTemplate let-dataItem>
            <div
              cdkDropList
              #attachmentsField="cdkDropList"
              [cdkDropListData]="dataItem.attachments"
              (cdkDropListDropped)="drop($event)"
              data-droplist="attachments"
            >
              <div *ngFor="let attachment of dataItem.attachments" cdkDrag>
                <ng-container *ngIf="attachment.title"
                  ><i cdkDragHandle>#</i>
                  <span class="filename" (click)="openPreview(attachment)">{{
                    attachment.title
                  }}</span></ng-container
                >
              </div>
            </div>
          </ng-template>
        </kendo-grid-column>
      </kendo-grid>
    </div>
  </kendo-splitter-pane>

  <kendo-splitter-pane *ngIf="preview" size="20%" min="20%" max="80%">
    <div class="preview-header">
      <h3 class="preview-title">{{ preview.title }}</h3>
      <i (click)="closePreview()" class="close-preview">&times;</i>
    </div>

    <div class="preview-body">
      <img [src]="preview.url" />
    </div>
  </kendo-splitter-pane>
</kendo-splitter>
